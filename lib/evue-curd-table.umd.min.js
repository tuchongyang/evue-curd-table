(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("SchemaForm"),require("Vue")):"function"===typeof define&&define.amd?define(["SchemaForm","Vue"],t):"object"===typeof exports?exports["evue-curd-table"]=t(require("SchemaForm"),require("Vue")):e["evue-curd-table"]=t(e["SchemaForm"],e["Vue"])})("undefined"!==typeof self?self:this,(function(e,t){return function(){"use strict";var o={1769:function(e,t){t.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[n,l]of t)o[n]=l;return o}},4440:function(t){t.exports=e},2740:function(e){e.exports=t}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e].call(r.exports,r,r.exports,l),r.exports}l.m=o,function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){l.f={},l.e=function(e){return Promise.all(Object.keys(l.f).reduce((function(t,o){return l.f[o](e,t),t}),[]))}}(),function(){l.u=function(e){return"evue-curd-table.umd.min."+e+".js"}}(),function(){l.miniCssF=function(e){}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="evue-curd-table:";l.l=function(o,n,r,a){if(e[o])e[o].push(n);else{var c,i;if(void 0!==r)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var p=s[u];if(p.getAttribute("src")==o||p.getAttribute("data-webpack")==t+r){c=p;break}}c||(i=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.setAttribute("data-webpack",t+r),c.src=o),e[o]=[n];var d=function(t,n){c.onerror=c.onload=null,clearTimeout(m);var l=e[o];if(delete e[o],c.parentNode&&c.parentNode.removeChild(c),l&&l.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=d.bind(null,c.onerror),c.onload=d.bind(null,c.onload),i&&document.head.appendChild(c)}}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p=""}(),function(){var e={206:0};l.f.j=function(t,o){var n=l.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var r=new Promise((function(o,l){n=e[t]=[o,l]}));o.push(n[2]=r);var a=l.p+l.u(t),c=new Error,i=function(o){if(l.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",c.name="ChunkLoadError",c.type=r,c.request=a,n[1](c)}};l.l(a,i,"chunk-"+t,t)}};var t=function(t,o){var n,r,a=o[0],c=o[1],i=o[2],s=0;if(a.some((function(t){return 0!==e[t]}))){for(n in c)l.o(c,n)&&(l.m[n]=c[n]);if(i)i(l)}for(t&&t(o);s<a.length;s++)r=a[s],l.o(e,r)&&e[r]&&e[r][0](),e[a[s]]=0},o=("undefined"!==typeof self?self:this)["webpackChunkevue_curd_table"]=("undefined"!==typeof self?self:this)["webpackChunkevue_curd_table"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var r={};return function(){if(l.r(r),l.d(r,{ConstantStatus:function(){return u},CurdTable:function(){return ht}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(l.p=t[1])}var o=l(2740);const n=(0,o.createTextVNode)(),a={class:"name"};var c={props:{value:{type:[String,Number],default:""},options:{type:Array,default:()=>[]}},setup(e){const t=e,l=(0,o.computed)((()=>{const e=t.options||[];return e.find((e=>e.value==t.value))||{}}));return(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("span",{class:(0,o.normalizeClass)(["constant-status",(0,o.unref)(l).className])},[(0,o.unref)(l).icon?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)((0,o.unref)(l).icon),{key:0,class:"icon",size:14,style:{width:"12px",height:"12px"}})):(0,o.createCommentVNode)("",!0),n,(0,o.createElementVNode)("span",a,(0,o.toDisplayString)((0,o.unref)(l).label),1)],2))}},i=l(1769);const s=(0,i.Z)(c,[["__scopeId","data-v-25e65442"]]);var u=s;const p={key:2};var d={props:{scope:{type:Object,default(){return{}}},schema:{type:Object,default(){return{}}}},setup(e){const t=e;return(e,n)=>{const l=(0,o.resolveComponent)("el-image");return t.schema.options?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(u),{key:0,value:t.scope.row[t.schema.prop],options:t.schema.options},null,8,["value","options"])):t.schema.form&&"file"==t.schema.form.component?((0,o.openBlock)(),(0,o.createBlock)(l,{key:1,src:t.scope.row[t.schema.prop],"preview-src-list":[t.scope.row[t.schema.prop]],style:{width:"40px",height:"40px","vertical-align":"top"},fit:"cover"},null,8,["src","preview-src-list"])):((0,o.openBlock)(),(0,o.createElementBlock)("span",p,(0,o.toDisplayString)(t.scope.row[t.schema.prop]),1))}}};const m=d;var f=m,h=l(4440),v=(e,t)=>{const o=e.__vccOpts||e;for(const[n,l]of t)o[n]=l;return o};const w=(0,o.defineComponent)({name:"Search"}),k={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},g=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704z"},null,-1),C=[g];function x(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",k,C)}var B=v(w,[["render",x]]);const V={class:"table-filter"},y=(0,o.createTextVNode)("查询"),b=(0,o.createTextVNode)("重置");var N={props:{schema:{type:Object,default:()=>({})}},emits:["search"],setup(e,{emit:t}){const n=e,l=(0,o.ref)(),r=()=>{t("search",l.value.modelRef)},a=()=>{console.log("formSchemaRef",l),l.value.schemaFormRef.resetFields()};return(e,t)=>{const c=(0,o.resolveComponent)("el-button");return(0,o.openBlock)(),(0,o.createElementBlock)("div",V,[(0,o.createVNode)((0,o.unref)(h.SchemaForm),{ref_key:"formSchemaRef",ref:l,"form-schema":n.schema,inline:"",size:"mini"},{"operate-button":(0,o.withCtx)((()=>[(0,o.createVNode)(c,{type:"primary",onClick:r,icon:(0,o.unref)(B)},{default:(0,o.withCtx)((()=>[y])),_:1},8,["icon"]),(0,o.createVNode)(c,{type:"default",onClick:a},{default:(0,o.withCtx)((()=>[b])),_:1})])),_:1},8,["form-schema"])])}}};const _=N;var E=_;const z=(0,o.defineComponent)({name:"CaretLeft"}),S={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},T=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M672 192L288 511.936 672 832z"},null,-1),M=[T];function F(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",S,M)}var H=v(z,[["render",F]]);const j=(0,o.defineComponent)({name:"VideoPause"}),D={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},O=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 832a384 384 0 000-768 384 384 0 000 768zm-96-544q32 0 32 32v256q0 32-32 32t-32-32V384q0-32 32-32zm192 0q32 0 32 32v256q0 32-32 32t-32-32V384q0-32 32-32z"},null,-1),P=[O];function L(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",D,P)}var A=v(j,[["render",L]]);const R=(0,o.defineComponent)({name:"CaretRight"}),I={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},q=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),$=[q];function U(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",I,$)}var Z=v(R,[["render",U]]),W={props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(e,{emit:t}){const n=e,l=(0,o.inject)("columns"),r=(0,o.computed)({get(){return n.visible},set(e){t("update:visible",e)}});(0,o.watch)((()=>n.visible),(e=>{r.value=e}));const a=(0,o.computed)((()=>{const e=[];for(const t in l.value){const o=l.value[t];if(o.children)for(const t in o.children){const n=o.children[t];e.push(n)}else e.push(o)}return e})),c=(0,o.ref)([{value:"left",label:"左固定",icon:H},{value:"",label:"不固定",icon:A},{value:"right",label:"右固定",icon:Z}]),i=(e,t)=>{t?e.fixed=t:delete e.fixed,console.log(e,"row")};return(e,t)=>{const n=(0,o.resolveComponent)("el-table-column"),l=(0,o.resolveComponent)("el-switch"),s=(0,o.resolveComponent)("el-icon"),u=(0,o.resolveComponent)("el-button"),p=(0,o.resolveComponent)("el-tooltip"),d=(0,o.resolveComponent)("el-button-group"),m=(0,o.resolveComponent)("el-table"),f=(0,o.resolveComponent)("el-drawer");return(0,o.openBlock)(),(0,o.createBlock)(f,{modelValue:(0,o.unref)(r),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.isRef)(r)?r.value=e:null),title:"列设置",size:"40%"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(m,{data:(0,o.unref)(a)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(n,{property:"label",label:"列名称"}),(0,o.createVNode)(n,{property:"hidden",label:"显示"},{default:(0,o.withCtx)((e=>[(0,o.createVNode)(l,{modelValue:e.row.hidden,"onUpdate:modelValue":t=>e.row.hidden=t,"active-value":!1,"inactive-value":!0},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.createVNode)(n,{property:"fixed",label:"固定显示",width:"170",align:"center"},{default:(0,o.withCtx)((e=>[(0,o.createVNode)(d,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(c.value,(t=>((0,o.openBlock)(),(0,o.createBlock)(p,{key:t.value,content:t.label},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{size:"mini",onClick:o=>i(e.row,t.value),type:!e.row.fixed&&""==t.value||e.row.fixed==t.value?"primary":""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(s,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(t.icon)))])),_:2},1024)])),_:2},1032,["onClick","type"])])),_:2},1032,["content"])))),128))])),_:2},1024)])),_:1})])),_:1},8,["data"])])),_:1},8,["modelValue"])}}};const G=W;var J=G;const K=(0,o.defineComponent)({name:"Refresh"}),Q={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},X=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 01128 512h64a320 320 0 00555.712 216.448H654.72a32 32 0 110-64h149.056a32 32 0 0132 32v148.928a32 32 0 11-64 0v-50.56zM276.288 295.616h92.992a32 32 0 010 64H220.16a32 32 0 01-32-32V178.56a32 32 0 0164 0v50.56A384 384 0 01896.128 512h-64a320 320 0 00-555.776-216.384z"},null,-1),Y=[X];function ee(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",Q,Y)}var te=v(K,[["render",ee]]);const oe=(0,o.defineComponent)({name:"ScaleToOriginal"}),ne={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},le=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0160.236 60.235v481.883a60.235 60.235 0 01-60.236 60.235H210.824a60.235 60.235 0 01-60.236-60.235V240.94a60.235 60.235 0 0160.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0090.353 240.94v481.883a120.47 120.47 0 00120.47 120.47h602.353a120.47 120.47 0 00120.471-120.47V240.94a120.47 120.47 0 00-120.47-120.47zm-120.47 180.705a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 0060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zm-361.412 0a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 1060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zM512 361.412a30.118 30.118 0 00-30.118 30.117v30.118a30.118 30.118 0 0060.236 0V391.53A30.118 30.118 0 00512 361.412zM512 512a30.118 30.118 0 00-30.118 30.118v30.117a30.118 30.118 0 0060.236 0v-30.117A30.118 30.118 0 00512 512z"},null,-1),re=[le];function ae(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",ne,re)}var ce=v(oe,[["render",ae]]);const ie=(0,o.defineComponent)({name:"Download"}),se={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ue=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 110 64H160a32 32 0 110-64zm384-253.696l236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),pe=[ue];function de(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",se,pe)}var me=v(ie,[["render",de]]);const fe=(0,o.defineComponent)({name:"Operation"}),he={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ve=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M389.44 768a96.064 96.064 0 01181.12 0H896v64H570.56a96.064 96.064 0 01-181.12 0H128v-64h261.44zm192-288a96.064 96.064 0 01181.12 0H896v64H762.56a96.064 96.064 0 01-181.12 0H128v-64h453.44zm-320-288a96.064 96.064 0 01181.12 0H896v64H442.56a96.064 96.064 0 01-181.12 0H128v-64h133.44z"},null,-1),we=[ve];function ke(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",he,we)}var ge=v(fe,[["render",ke]]);const Ce={class:"table-menu"};var xe={props:{filterVisible:{type:Boolean,default:!0}},emits:["operation"],setup(e,{emit:t}){const n=e,l=(0,o.computed)((()=>[{label:"刷新",value:"refresh",icon:te},{label:n.filterVisible?"收起查询":"展开查询",value:"searchToggle",icon:B},{label:"密度",icon:ce,value:"size",options:[{label:"默认",value:"small"},{label:"宽松",value:"medium"},{label:"紧凑",value:"mini"}]},{label:"导出数据",value:"export",icon:me},{label:"列设置",value:"operation",icon:ge}])),r=(0,o.ref)(!1),a=e=>{t("operation",e.value),"operation"==e.value&&(r.value=!0)},c=(0,o.ref)("small"),i=e=>{c.value=e,t("operation","size",e)};return(e,t)=>{const n=(0,o.resolveComponent)("el-icon"),s=(0,o.resolveComponent)("el-button"),u=(0,o.resolveComponent)("el-dropdown-item"),p=(0,o.resolveComponent)("el-dropdown-menu"),d=(0,o.resolveComponent)("el-dropdown"),m=(0,o.resolveComponent)("el-tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",Ce,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(l),(e=>((0,o.openBlock)(),(0,o.createBlock)(m,{key:e.label,content:e.label,placement:"top"},{default:(0,o.withCtx)((()=>[e.options?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,trigger:"click",style:{margin:"0 10px"},onCommand:i},{dropdown:(0,o.withCtx)((()=>[(0,o.createVNode)(p,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.options,(e=>((0,o.openBlock)(),(0,o.createBlock)(u,{key:e.value,command:e.value},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",{style:(0,o.normalizeStyle)({color:c.value==e.value?"var(--el-color-primary)":""})},(0,o.toDisplayString)(e.label),5)])),_:2},1032,["command"])))),128))])),_:2},1024)])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(s,{type:"text"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(n,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.icon)))])),_:2},1024)])),_:2},1024)])),_:2},1024)):((0,o.openBlock)(),(0,o.createBlock)(s,{key:1,type:"text",onClick:t=>a(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(n,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.icon)))])),_:2},1024)])),_:2},1032,["onClick"]))])),_:2},1032,["content"])))),128)),(0,o.createVNode)((0,o.unref)(J),{visible:r.value,"onUpdate:visible":t[0]||(t[0]=e=>r.value=e)},null,8,["visible"])])}}};const Be=(0,i.Z)(xe,[["__scopeId","data-v-3b34515a"]]);var Ve=Be;const ye={class:"item-col"},be={class:"label"},Ne={class:"det"};var _e={setup(e,{expose:t}){const n=(0,o.ref)(!1),l=(0,o.ref)([]),r=e=>{l.value=[],e.columns.forEach((t=>{if(t.childrem&&t.children.length)for(let o in t.children){const n=t.children[o];l.value.push({prop:n.prop,label:n.label,value:e.data[n.prop],span:n.form&&n.form.span||12,options:n.options,form:n.form})}else l.value.push({prop:t.prop,label:t.label,value:e.data[t.prop],span:t.form&&t.form.span||12,options:t.options,form:t.form})})),n.value=!0};return t({open:r}),(e,t)=>{const r=(0,o.resolveComponent)("el-image"),a=(0,o.resolveComponent)("el-col"),c=(0,o.resolveComponent)("el-row"),i=(0,o.resolveComponent)("el-drawer");return(0,o.openBlock)(),(0,o.createBlock)(i,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),title:"详情",size:"40%"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,{class:"table-detail"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.value,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(a,{span:e.span,key:t},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",ye,[(0,o.createElementVNode)("div",be,(0,o.toDisplayString)(e.label)+"：",1),(0,o.createElementVNode)("div",Ne,[e.options?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(u),{key:0,value:e.value,options:e.options},null,8,["value","options"])):e.form&&"file"==e.form.component?((0,o.openBlock)(),(0,o.createBlock)(r,{key:1,src:e.value,"preview-src-list":[e.value],style:{width:"40px",height:"40px","vertical-align":"top"},fit:"cover"},null,8,["src","preview-src-list"])):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:2},[(0,o.createTextVNode)((0,o.toDisplayString)(e.value),1)],64))])])])),_:2},1032,["span"])))),128))])),_:1})])),_:1},8,["modelValue"])}}};const Ee=(0,i.Z)(_e,[["__scopeId","data-v-70521a0d"]]);var ze=Ee;function Se(e){if(!e||"object"!==typeof e||e instanceof Date||e instanceof File)return e;const t=e.constructor===Array?[]:{};return Object.keys(e).forEach((o=>{e[o]&&"object"===typeof e[o]?t[o]=Se(e[o]):t[o]=e[o]})),t}const Te=(0,o.defineComponent)({name:"Plus"}),Me={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Fe=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0164 0v352h352a32 32 0 110 64H544v352a32 32 0 11-64 0V544H128a32 32 0 010-64h352z"},null,-1),He=[Fe];function je(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",Me,He)}var De=v(Te,[["render",je]]);const Oe=(0,o.defineComponent)({name:"Edit"}),Pe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Le=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M832 512a32 32 0 1164 0v352a32 32 0 01-32 32H160a32 32 0 01-32-32V160a32 32 0 0132-32h352a32 32 0 010 64H192v640h640V512z"},null,-1),Ae=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 10-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 010 135.808l-331.84 331.84a32 32 0 01-18.112 9.088L436.8 623.68a32 32 0 01-36.224-36.224l15.104-105.6a32 32 0 019.024-18.112l331.904-331.84a96 96 0 01135.744 0z"},null,-1),Re=[Le,Ae];function Ie(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",Pe,Re)}var qe=v(Oe,[["render",Ie]]);const $e=(0,o.defineComponent)({name:"Delete"}),Ue={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ze=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M160 256H96a32 32 0 010-64h256V95.936a32 32 0 0132-32h256a32 32 0 0132 32V192h256a32 32 0 110 64h-64v672a32 32 0 01-32 32H192a32 32 0 01-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 01-32-32V416a32 32 0 0164 0v320a32 32 0 01-32 32zm192 0a32 32 0 01-32-32V416a32 32 0 0164 0v320a32 32 0 01-32 32z"},null,-1),We=[Ze];function Ge(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",Ue,We)}var Je=v($e,[["render",Ge]]);const Ke=(0,o.defineComponent)({name:"ArrowDown"}),Qe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Xe=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M831.872 340.864L512 652.672 192.128 340.864a30.592 30.592 0 00-42.752 0 29.12 29.12 0 000 41.6L489.664 714.24a32 32 0 0044.672 0l340.288-331.712a29.12 29.12 0 000-41.728 30.592 30.592 0 00-42.752 0z"},null,-1),Ye=[Xe];function et(e,t,n,l,r,a){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",Qe,Ye)}var tt=v(Ke,[["render",et]]);const ot={class:"table-container"},nt={class:"table-control"},lt={class:"btn-control"},rt=(0,o.createTextVNode)(" 添加 "),at={key:0,class:"min-control"},ct=(0,o.createTextVNode)(" 编辑 "),it=(0,o.createTextVNode)(" 详情 "),st=(0,o.createTextVNode)(" 删除 "),ut=(0,o.createTextVNode)(" 编辑 "),pt=(0,o.createTextVNode)(" 详情 "),dt=(0,o.createTextVNode)(" 删除 ");var mt={props:{data:{type:Array,default(){return[]}},columns:{type:Array,default(){return[]}},pageOptions:{type:Object,default(){return{pageIndex:1,pageSize:10}}},fetchData:{type:Function,default:null},fetchCreate:{type:Function,default:null},fetchEdit:{type:Function,default:null},fetchRemove:{type:Function,default:null},option:{type:Object,default(){return{optionWidth:160,hideMenu:!1,hideOperation:!1,hideBtnAdd:!1,pageHide:!1,excelTitle:""}}}},emits:["selectionChange"],setup(e,{emit:t}){const n=e,r=(0,o.computed)((()=>{const e=n.data.map((e=>e));return e})),a=(0,o.ref)({}),c=(0,o.reactive)({pageIndex:1,pageSize:10}),i=(0,o.reactive)({}),s=(0,o.ref)(!0),u=(0,o.ref)(!1),p=()=>{n.fetchData&&(u.value=!0,n.fetchData({...c,search:i}).finally((()=>{u.value=!1})))},d=(0,o.computed)((()=>n.pageOptions.total||n.data.length||0)),m=(0,o.computed)((()=>{const e=[],t=o=>{for(const n in o){const l=o[n];if(l.children&&l.children.length)t(l.children);else if(l.filter){const t=l.options||[];!t.some((e=>"全部"==e.label))&&t.unshift({label:"全部",value:""}),e.push({type:l.filter.component||"input",label:l.label,prop:l.prop,options:t})}}};return t(n.columns),{formItem:e}})),v=e=>{for(let t in e)i[t]=e[t];console.log("search",i),p()};p();const w=(0,o.ref)([]),k=Se(n.columns);w.value=k,(0,o.provide)("columns",w);const g=(e,t)=>{if(t.options){const o=t.options.find((t=>t.value==e));return o&&o.label||e}return e},C=(e,t)=>{switch(e){case"refresh":p();break;case"searchToggle":s.value=!s.value;break;case"size":t&&(a.value.size=t);break;case"export":Promise.all([l.e(467),l.e(973)]).then(l.bind(l,3184)).then((e=>{e.export_json_to_excel({header:w.value.map((e=>e.label)),data:r.value.map((e=>w.value.map((t=>g(e[t.prop],t))))),filename:n.excelTitle||"导出数据"})}));break}},x=e=>{const t={formItem:[],rules:{}},o=e=>{const o={type:e.form&&e.form.component||"input",label:e.label,prop:e.prop,options:e.options,props:e.form&&e.form.props,value:e.form&&e.form.value,hidden:e.form&&e.form.hidden,span:e.form&&e.form.span||12};t.formItem.push(o),e.form&&e.form.rules&&(t.rules[e.prop]=e.form.rules)};w.value.map((e=>{if(e.children&&e.children.length)for(let t in e.children)o(e.children[t]);else o(e)})),h.FormDialog.show({title:e?"编辑":"添加",formSchema:t,fields:e,handleOk:async t=>{const o=e?"fetchCreate":"fetchEdit";return await(n[o]&&n[o](t,e))}})},B=(0,o.getCurrentInstance)(),V=e=>{B.appContext.config.globalProperties.$confirm("确认删除当前数据吗","提示",{type:"warning",cancelButtonText:"取消",confirmButtonText:"确定"}).then((async()=>{await(n.fetchRemove&&n.fetchRemove(e.row)),B.appContext.config.globalProperties.$message({type:"success",message:"删除成功"})}))},y=e=>{const{children:t,...o}=e;return o||t},b=(0,o.ref)(),N=e=>{b.value.open({data:e,columns:w.value})},_=e=>{"undefined"!==typeof B.attrs["click-row-to-view"]&&N(e)},z=e=>{t("selectionChange",e)};return(t,l)=>{const i=(0,o.resolveComponent)("el-icon"),h=(0,o.resolveComponent)("el-button"),k=(0,o.resolveComponent)("el-table-column"),g=(0,o.resolveComponent)("document"),B=(0,o.resolveComponent)("el-dropdown-item"),S=(0,o.resolveComponent)("el-dropdown-menu"),T=(0,o.resolveComponent)("el-dropdown"),M=(0,o.resolveComponent)("el-table"),F=(0,o.resolveComponent)("el-pagination"),H=(0,o.resolveDirective)("loading");return(0,o.openBlock)(),(0,o.createElementBlock)("div",ot,[(0,o.withDirectives)((0,o.createVNode)(E,{schema:(0,o.unref)(m),onSearch:v},null,8,["schema"]),[[o.vShow,(0,o.unref)(m).formItem.length&&s.value]]),(0,o.createElementVNode)("div",nt,[(0,o.createElementVNode)("div",lt,[e.option.hideBtnAdd?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(h,{key:0,type:"primary",size:"mini",onClick:l[0]||(l[0]=e=>x())},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(De))])),_:1}),rt])),_:1})),(0,o.renderSlot)(t.$slots,"menuLeft")]),e.option.hideMenu?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",at,[(0,o.createVNode)(Ve,{filterVisible:s.value,onOperation:C},null,8,["filterVisible"])]))]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(M,(0,o.mergeProps)({id:"table",border:"",data:(0,o.unref)(r)},a.value,{onRowClick:_,onSelectionChange:z}),{default:(0,o.withCtx)((()=>[void 0!==t.$attrs.index?((0,o.openBlock)(),(0,o.createBlock)(k,{key:0,type:"index"})):(0,o.createCommentVNode)("",!0),void 0!==t.$attrs.selection?((0,o.openBlock)(),(0,o.createBlock)(k,{key:1,type:"selection"})):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(w.value,(e=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:e.label},[e.hidden?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(k,(0,o.normalizeProps)((0,o.mergeProps)({key:0},y(e))),{header:(0,o.withCtx)((()=>[t.$slots[e.prop+"Header"]?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)((0,o.toDisplayString)(e.label),1)],64)),(0,o.renderSlot)(t.$slots,e.prop+"Header",{column:e})])),default:(0,o.withCtx)((t=>[e.children&&e.children.length?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(e.children,(e=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:e.prop},[e.hidden?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(k,(0,o.normalizeProps)((0,o.mergeProps)({key:0},y(e))),null,16))],64)))),128)):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(f,{scope:t,schema:e},null,8,["scope","schema"])])),_:2},1040))],64)))),128)),e.option.hideOperation?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(k,{key:2,label:"操作",fixed:"right",width:e.option.menuWidth||"180"},{default:(0,o.withCtx)((e=>[t.$slots.menuBtn?((0,o.openBlock)(),(0,o.createBlock)(T,{key:1,trigger:"click"},{dropdown:(0,o.withCtx)((()=>[(0,o.createVNode)(S,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(B,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{type:"text",onClick:(0,o.withModifiers)((t=>x(e.row)),["stop"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(qe))])),_:1}),ut])),_:2},1032,["onClick"])])),_:2},1024),(0,o.createVNode)(B,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{type:"text",onClick:(0,o.withModifiers)((t=>N(e.row)),["stop"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g)])),_:1}),pt])),_:2},1032,["onClick"])])),_:2},1024),(0,o.createVNode)(B,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{type:"text",style:{color:"#ff0000"},onClick:(0,o.withModifiers)((t=>V(e)),["stop"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(Je))])),_:1}),dt])),_:2},1032,["onClick"])])),_:2},1024),(0,o.renderSlot)(t.$slots,"menuBtn",(0,o.normalizeProps)((0,o.guardReactiveProps)(e)))])),_:2},1024)])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{type:"text"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(n.option.menuBtnTitle),1),(0,o.createVNode)(i,{class:"el-icon--right"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(tt))])),_:1})])),_:1})])),_:2},1024)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createVNode)(h,{type:"text",onClick:(0,o.withModifiers)((t=>x(e.row)),["stop"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(qe))])),_:1}),ct])),_:2},1032,["onClick"]),(0,o.createVNode)(h,{type:"text",onClick:(0,o.withModifiers)((t=>N(e.row)),["stop"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g)])),_:1}),it])),_:2},1032,["onClick"]),(0,o.createVNode)(h,{type:"text",style:{color:"#ff0000"},onClick:(0,o.withModifiers)((t=>V(e)),["stop"])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)((0,o.unref)(Je))])),_:1}),st])),_:2},1032,["onClick"])],64)),(0,o.renderSlot)(t.$slots,"menu",(0,o.normalizeProps)((0,o.guardReactiveProps)(e)))])),_:3},8,["width"]))])),_:3},16,["data"])),[[H,u.value]]),e.option.pageHide?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(F,{key:0,class:"pagination",background:"",layout:"total, sizes, prev, pager, next, jumper",total:(0,o.unref)(d),"current-page":(0,o.unref)(c).pageIndex,"onUpdate:current-page":l[1]||(l[1]=e=>(0,o.unref)(c).pageIndex=e),"page-size":(0,o.unref)(c).pageSize,"onUpdate:page-size":l[2]||(l[2]=e=>(0,o.unref)(c).pageSize=e),onCurrentChange:p,onSizeChange:p},null,8,["total","current-page","page-size"])),(0,o.createVNode)(ze,{ref_key:"STableDetailRef",ref:b},null,512)])}}};const ft=mt;var ht=ft}(),r}()}));